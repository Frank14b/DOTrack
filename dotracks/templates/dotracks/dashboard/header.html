{% load static %}

<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>DOTrack | {{ request.resolver_match.view_name }}</title>
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.7 -->
    <link href="https://afeld.github.io/emoji-css/emoji.css" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/4.2.4/css/ionicons.min.css" />

    <link rel="stylesheet" href="{% static 'dotracks/css_/bootstrap.min.css' %}">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="{% static 'dotracks/css_/font-awesome.min.css' %}">
    <!-- Ionicons -->
    <link rel="stylesheet" href="{% static 'dotracks/css_/ionicons.min.css' %}">
    <link rel="stylesheet" href="{% static 'dotracks/css_/dataTables.bootstrap.min.css' %}">
    <!-- Theme style -->
    <link rel="stylesheet" href="{% static 'dotracks/css_/AdminLTE.min.css' %}">
    <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
    <link rel="stylesheet" href="{% static 'dotracks/css_/_all-skins.min.css' %}">
    <!-- Select2 -->
    <link rel="stylesheet" href="{% static 'dotracks/css_/select2.min.css' %}">
    <!-- iCheck for checkboxes and radio inputs -->
    <link rel="stylesheet" href="{% static 'dotracks/css_/all.css' %}">
    <!-- croppie -->
    <link rel="stylesheet" href="{% static 'dotracks/css_/croppie.css' %}">

    <link rel="stylesheet" href="{% static 'dotracks/jquery-cropper-master/dist/cropper.min.css' %}">
    <!-- bootstrap wysihtml5 - text editor -->
    <link rel="stylesheet" href="{% static 'dotracks/css_/bootstrap3-wysihtml5.min.css' %}">

    <!-- Favicon -->
    <link rel="icon" href="{% static 'dotracks/img/logo.png' %}" type="image/x-icon" />

    <!-- HTML5 Shim and Respond.js' %} IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js' %} doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js' %}"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js' %}"></script>
  <![endif]-->

    <!-- Google Font -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">

    <link rel="stylesheet" href="{% static 'dotracks/css_/mdb.min.css' %}">
</head>

<style>
    html::-webkit-scrollbar-track,
    .scroll::-webkit-scrollbar-track {
        box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.1);
        background-color: #aaa;
        border-radius: 0px;
        height: 8px;
        width: 8px;
        opacity: 0.5;
    }

    /* line 16, zonestyle.scss */

    html::-webkit-scrollbar,
    .scroll::-webkit-scrollbar {
        width: 8px;
        background-color: #f5f5f5;
        cursor: pointer;
        height: 8px;
    }

    /* line 23, zonestyle.scss */

    html::-webkit-scrollbar:hover,
    .scroll::-webkit-scrollbar:hover {
        width: 8px;
        background-color: #fff;
        cursor: pointer;
        height: 8px;
    }

    /* line 30, zonestyle.scss */

    html::-webkit-scrollbar-thumb,
    .scroll::-webkit-scrollbar-thumb {
        border-radius: 0px;
        background-color: #fff;
        cursor: pointer;
    }

    /* line 35, zonestyle.scss */

    HTML {
        overflow-x: hidden;
    }

    /* line 38, zonestyle.scss */

    .no_scroll {
        overflow: hidden;
    }

    /* line 41, zonestyle.scss */

    .scroll_v_h,
    .scroll_h_v {
        overflow: auto;
    }

    /* line 44, zonestyle.scss */

    .scroll_v {
        overflow-y: auto;
        overflow-x: hidden;
    }

    /* line 48, zonestyle.scss */

    .scroll_h {
        overflow-x: auto;
        overflow-y: hidden;
        height: 8px;
    }

    /* line 53, zonestyle.scss */

    .scroll_hover {
        transition-duration: 0.6s;
    }

    /* line 54, zonestyle.scss */

    .scroll_hover .scroll::-webkit-scrollbar {
        width: 0px;
        background-color: none;
        cursor: pointer;
        height: 0px;
    }

    /* line 63, zonestyle.scss */

    .scroll_hover:hover .scroll::-webkit-scrollbar {
        width: 8px;
        background-color: #fff;
        cursor: pointer;
        height: 8px;
    }

    /* line 69, zonestyle.scss */

    .scroll_hover:hover .scroll::-webkit-scrollbar-thumb {
        background-color: #f5f5f5;
    }

    /* line 73, zonestyle.scss */

    .scroll_bleu::-webkit-scrollbar-thumb {
        background-color: #229CDD;
        opacity: 0.5;
    }

    /* line 77, zonestyle.scss */

    .scroll_bleu::-webkit-scrollbar-track {
        background-color: #fff;
        opacity: 0.5;
        border: 1px solid lightblue;
    }

    /* line 82, zonestyle.scss */

    .scroll_bleu::-webkit-scrollbar {
        opacity: 0.5;
    }

    /* line 86, zonestyle.scss */

    .scroll_hover:hover .scroll_bleu::-webkit-scrollbar-thumb {
        background-color: #229CDD;
        opacity: 0.5;
    }

    /* line 90, zonestyle.scss */

    .scroll_hover:hover .scroll_bleu::-webkit-scrollbar-track {
        background-color: #fff;
        opacity: 0.5;
        border: 1px solid lightblue;
    }

    /* line 95, zonestyle.scss */

    .scroll_hover:hover .scroll_bleu::-webkit-scrollbar {
        opacity: 0.5;
    }

    /* line 100, zonestyle.scss */

    .scroll_noir::-webkit-scrollbar-thumb {
        background-color: #555;
        opacity: 0.5;
    }

    /* line 104, zonestyle.scss */

    .scroll_noir::-webkit-scrollbar-track {
        background-color: #fff;
        opacity: 0.5;
        border: 1px solid #aaa;
    }

    /* line 109, zonestyle.scss */

    .scroll_noir::-webkit-scrollbar {
        opacity: 0.5;
    }

    /* line 113, zonestyle.scss */

    .scroll_hover:hover .scroll_noir::-webkit-scrollbar-thumb {
        background-color: #555;
        opacity: 0.5;
    }

    /* line 117, zonestyle.scss */

    .scroll_hover:hover .scroll_noir::-webkit-scrollbar-track {
        background-color: #fff;
        opacity: 0.5;
        border: 1px solid #aaa;
    }

    /* line 122, zonestyle.scss */

    .scroll_hover:hover .scroll_noir::-webkit-scrollbar {
        opacity: 0.5;
    }

    /* line 127, zonestyle.scss */

    .scroll_red::-webkit-scrollbar-thumb {
        background-color: red;
        opacity: 0.5;
    }

    /* line 131, zonestyle.scss */

    .scroll_red::-webkit-scrollbar-track {
        background-color: #fff;
        opacity: 0.5;
        border: 1px solid lightcoral;
    }

    /* line 136, zonestyle.scss */

    .scroll_red::-webkit-scrollbar {
        opacity: 0.5;
    }

    /* line 140, zonestyle.scss */

    .scroll_hover:hover .scroll_red::-webkit-scrollbar-thumb {
        background-color: red;
        opacity: 0.5;
    }

    /* line 144, zonestyle.scss */

    .scroll_hover:hover .scroll_red::-webkit-scrollbar-track {
        background-color: #fff;
        opacity: 0.5;
        border: 1px solid lightcoral;
    }

    /* line 149, zonestyle.scss */

    .scroll_hover:hover .scroll_red::-webkit-scrollbar {
        opacity: 0.5;
    }

    .hover {
        box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.16), 0 2px 10px 0 rgba(0, 0, 0, 0.12);
    }

    .menus, #menus {
        display: none;
    }

    .visible {
        display: block;
    }

    #newNotifMess,
    #newNotifMicro,
    #divDOCIMAGE,
    #divdocx,
    #STOPmodeMICro {
        display: none;
    }

    .nin {
        display: none;
    }
</style>

<style>
    @import url('https://fonts.googleapis.com/css?family=Oswald|Poppins');
    body {
        /* font-family: 'Oswald', sans-serif; */
        font-family: 'Poppins', sans-serif;
    }

    .card-box {
        background: #FAFAFA;
        min-height: 300px;
        position: relative;
        padding: 30px 30px 20px;
        margin-bottom: 20px;
        display: -ms-flexbox;
        display: flex;
        -ms-flex-direction: column;
        flex-direction: column;
        -webkit-box-pack: justify;
        -ms-flex-pack: justify;
        justify-content: space-between;
        position: relative;
        cursor: pointer;
    }

    .card-box:hover {
        background: linear-gradient(to right, #1fa2ff17 0%, #12d8fa2b 51%, #1fa2ff36 100%);
    }

    .card-box:after {
        display: block;
        background: #2196F3;
        border-top: 2px solid #2196F3;
        content: '';
        width: 100%;
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
    }

    .card-title h5 {
        margin: 0;
        padding-top: 5%;
        color: #2196F3;
        font-family: 'Oswald', sans-serif;
        text-transform: uppercase;
        font-size: 14px;
        line-height: 1;
        margin-bottom: 15px;
    }

    .card-title h2 {
        margin: 0;
        padding-top: 5%;
        color: #2196F3;
        font-family: 'Oswald', sans-serif;
        text-transform: uppercase;
        font-size: 20px;
        line-height: 1;
        margin-bottom: 15px;
    }

    .card-title p {
        margin: 0;
        margin-bottom: 10px;
        font-size: 16px;
    }

    .card-link a {
        text-decoration: none;
        font-family: 'Oswald', sans-serif;
        color: #FF5722;
        font-size: 15px;
    }

    pre {
        background: #fff;
        border: 0px;
    }
</style>

<!--
BODY TAG OPTIONS:
=================
Apply one or more of the following classes to get the
desired effect
|---------------------------------------------------------|
| SKINS         | skin-blue                               |
|               | skin-black                              |
|               | skin-purple                             |
|               | skin-yellow                             |
|               | skin-red                                |
|               | skin-green                              |
|---------------------------------------------------------|
|LAYOUT OPTIONS | fixed                                   |
|               | layout-boxed                            |
|               | layout-top-nav                          |
|               | sidebar-collapse                        |
|               | sidebar-mini                            |
|---------------------------------------------------------|
-->

<body class="hold-transition skin-blue blue fixed sidebar-mini scroll_vert scroll">

    <div class="wrapper">

        <!-- Main Header -->
        <header class="main-header bg-blue card">

            <!-- Logo -->
            <a href="" class="logo hidden-sm hidden-xs">
                <!-- mini logo for sidebar mini 50x50 pixels -->
                <span class="logo-mini">
                    <img src="{% static 'dotracks/img/logo.png' %}" alt="" style="width: 100%; margin-left: -0px;">
                </span>
                <!-- logo for regular state and mobile devices -->
                <span class="logo-lg">
                    <img src="{% static 'dotracks/img/logo.png' %}" alt="" style="width: 30%; margin-left: -60px;">
                    <b>DOTrack</b>
                </span>
            </a>

            <!-- Header Navbar -->
            <nav class="navbar navbar-static-top" role="navigation">
                <!-- Sidebar toggle button-->
                <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
                    <span class="sr-only"></span>
                </a>
                <!-- Navbar Right Menu -->
                <div class="navbar-custom-menu">
                    <ul class="nav navbar-nav">

                        <li id="menus" class="menus {% if request.resolver_match.view_name == 'Configuration' %}active{%endif%}" data-iden="18">
                            <a href="{{ baseurl }}/Member/configuration/{{ lang_abbr }}/">
                                <i class="glyphicon glyphicon-cog"></i>
                                <span class="hidden">{{ langue.form_reglages }}</span>
                            </a>
                        </li>
                        <!-- Messages: style can be found in dropdown.less-->
                        <li class="dropdown messages-menu hidden">
                            <!-- Menu toggle button -->
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="fa fa-envelope-o"></i>
                                <span class="label label-success">4</span>
                            </a>
                            <ul class="dropdown-menu">
                                <li class="header">You have 4 messages</li>
                                <li>
                                    <!-- inner menu: contains the messages -->
                                    <ul class="menu">
                                        <li>
                                            <!-- start message -->
                                            <a href="#">
                                                <div class="pull-left">
                                                    <!-- User Image -->
                                                    <img src="http://esrilanka.org/mcqpal/backend/dist/img/user2-160x160.png" class="img-circle" alt="User Image">
                                                </div>
                                                <!-- Message title and timestamp -->
                                                <h4>
                                                    <small>
                                                        <i class="fa fa-clock-o"></i> 5 mins</small>
                                                </h4>
                                                <p>Why not buy a new awesome theme?</p>
                                            </a>
                                        </li>
                                        <!-- end message -->
                                    </ul>
                                    <!-- /.menu -->
                                </li>
                                <li class="footer">
                                    <a href="{{baseurl}}/Member/chat/{{lang_abbr}}">See All Messages</a>
                                </li>
                            </ul>
                        </li>
                        <!-- /.messages-menu -->

                        <!-- Notifications Menu -->
                        <li class="dropdown notifications-menu">
                            <!-- Menu toggle button -->
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="fa fa-bell-o"></i>
                                <span class="label label-warning nbrNotif"></span>
                            </a>
                            <ul class="dropdown-menu card">
                                <input type="hidden" id="newNbrNotif" />
                                <li class="header">Vous avez
                                    <span class="nbrNotif actuel">0</span> notifications
                                </li>
                                <li>
                                    <!-- Inner Menu: contains the notifications -->
                                    <ul class="menu" id="contentNotif">

                                    </ul>
                                </li>
                                <li class="footer">
                                    <a href="#">View all</a>
                                </li>
                            </ul>
                        </li>
                        <!-- Tasks Menu -->
                        <li class="dropdown tasks-menu">
                            <!-- Menu Toggle Button -->
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <img src="{% static 'dotracks/img/' %}{% if lang_abbr == 'fr' %}dfr.png{% else %}{% if lang_abbr == 'en' %}den.jpeg{% else %}dch.png{% endif %}{% endif %}"
                                    style="width:20px; height:20px; border-radius:50%; margin-top:-3px" />&nbsp;&nbsp;
                                <b>{{ lang_abbr }}</b>
                            </a>
                            <ul class="dropdown-menu card" style="width:200px;">
                                <li class="header"></li>
                                <li>
                                    <!-- Inner menu: contains the tasks -->
                                    <ul class="menu">
                                        <li>
                                            <!-- Task item -->
                                            <a href="{{ baseUrl }}{{ request.get_full_path }}../fr">
                                                <!-- Task title and progress text -->
                                                <h3>
                                                    <img src="{% static 'dotracks/img/dfr.png' %}" style="width:20px; height:20px; border-radius:50%; margin-top:-3px" />&nbsp;&nbsp;Francais (fr-FR)
                                                </h3>
                                            </a>
                                            <a href="{{ baseUrl }}{{ request.get_full_path }}../en">
                                                <!-- Task title and progress text -->
                                                <h3>
                                                    <img src="{% static 'dotracks/img/den.jpeg' %}" style="width:20px; height:25px; border-radius:50%; margin-top:-3px" />&nbsp;&nbsp;Englais (en-EN)
                                                </h3>
                                            </a>
                                            <a class="hidden" href="{{ baseUrl }}{{ request.get_full_path }}../ch">
                                                <!-- Task title and progress text -->
                                                <h3>
                                                    <img src="{% static 'dotracks/img/dch.png' %}" style="width:20px; height:20px; border-radius:50%; margin-top:-3px" />&nbsp;&nbsp;Chinois (ch-CH)
                                                </h3>
                                            </a>
                                        </li>
                                        <!-- end task item -->
                                    </ul>
                                </li>
                                <li class="footer">
                                    <a href="#"></a>
                                </li>
                            </ul>
                        </li>
                        <!-- User Account Menu -->
                        <li class="dropdown user user-menu">
                            <!-- Menu Toggle Button -->
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <!-- The user image in the navbar-->
                                <img src="{% if userInfo.photo != '0' %}{{ baseurl }}/{{ userInfo.photo }}{% else %}http://esrilanka.org/mcqpal/backend/dist/img/user2-160x160.png{% endif %}"
                                    class="user-image" alt="User Image">
                                <!-- hidden-xs hides the username on small devices so only the image appears. -->
                                <span class="hidden-xs">
                                    {% if request.session.d_user%} {{ request.session.d_user }} {% else %} {{ request.session.d_member}} {% endif %}</span>
                            </a>
                            <ul class="dropdown-menu card">
                                <!-- The user image in the menu -->
                                <li class="user-header">
                                    <img src="{% if userInfo.photo != '0' %}{{ baseurl }}/{{ userInfo.photo }}{% else %}http://esrilanka.org/mcqpal/backend/dist/img/user2-160x160.png{% endif %}"
                                        class="img-circle" alt="User Image">

                                    <p>
                                        {% if request.session.d_user%} {{ request.session.d_user }} {% else %} {{ request.session.d_member }} {% endif %}
                                        <small>{{ userInfo.typ__libeler}}, {{ userInfo.role}}</small>
                                    </p>
                                </li>

                                <li class="user-footer">
                                    <div class="pull-left">
                                        <a href="{{ baseUrl }}/Member/profile/{{ lang_abbr }}/" class="btn btn-default">
                                            <span style="color:#fff">
                                                <i class="fa fa-user"></i> {{ langue.form_profile }}</span>
                                        </a>
                                    </div>
                                    <div class="pull-right">
                                        <a href="" id="deconnexionUser" class="btn btn-danger">
                                            <span style="color:#fff">
                                                <i class="fa fa-power-off"></i> {{ langue.form_logout }}</a>
                                        </span>
                                    </div>
                                </li>
                            </ul>
                        </li>
                        <!-- Control Sidebar Toggle Button -->
                        <li>
                            <a href="#" data-toggle="control-sidebar">
                                <i class="fa fa-gears"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>
        <!-- Left side column. contains the logo and sidebar -->
        <aside class="main-sidebar z-depth-4 blue card">

            <!-- sidebar: style can be found in sidebar.less -->
            <section class="sidebar mask rgba-black-strong waves-effect waves-light card">
                <!-- Sidebar user panel (optional) -->
                <div class="user-panel">
                    <div class="pull-left image">
                        <img src="{% if userInfo.photo != '0' %}{{ baseurl }}/{{ userInfo.photo }}{% else %}http://esrilanka.org/mcqpal/backend/dist/img/user2-160x160.png{% endif %}"
                            class="img-circle" alt="User Image">
                    </div>
                    <div class="pull-left info">
                        <p>
                            {% if request.session.d_user%} {{ request.session.d_user }} {% else %} {{request.session.d_member}} {% endif %}</p>
                        <!-- Status -->
                        <a href="#">
                            <i class="fa fa-circle text-success"></i> Online</a>
                    </div>
                </div>

                <!-- search form (Optional) 
                <form action="#" method="get" class="sidebar-form">
                    <div class="input-group">
                        <input type="text" name="q" class="form-control" placeholder="Search...">
                        <span class="input-group-btn">
                            <button type="submit" name="search" id="search-btn" class="btn btn-flat">
                                <i class="fa fa-search"></i>
                            </button>
                        </span>
                    </div>
                </form>
                <!-- /.search form -->

                <!-- Sidebar Menu -->
                <ul class="sidebar-menu" data-widget="tree">
                    <li class="header">HEADER</li>
                    <!-- Optionally, you can add icons to the links -->
                    <li class="{%if request.resolver_match.view_name == 'Administration'%}active{%endif%}">
                        <a href="{{ baseurl }}/dashboard/Member/{{lang_abbr}}" class="" style="font-size: 0.9em; text-align: left">
                            <i class="fa fa-dashboard"></i>
                            <span>{{ langue.form_dashboard }}</span>
                        </a>
                    </li>

                    <li class="treeview menus {%if request.resolver_match.view_name == 'Utilisateurs'%}active{%endif%}" data-iden="1">
                        <a href="#" class="" style="font-size: 0.9em; text-align: left">
                            <i class="fa fa-users"></i>
                            <span>{{ langue.form_utilisateurs }}</span>
                            <span class="label pull-right bg-green" style="font-size: .8em">{{ nbruser }}</span>
                            <span class="pull-right-container">
                                <i class="fa fa-angle-left pull-right"></i>
                            </span>
                        </a>
                        <ul class="treeview-menu">
                            <li class="menus" data-iden="8">
                                <a href="#" data-toggle="modal" data-target="#addUsers">
                                    <i class="fa fa-plus"></i>{{ langue.form_nouvelle }}</a>
                            </li>
                            <li class="menus" data-iden="9">
                                <a href="{{baseurl}}/Member/users/{{lang_abbr}}">
                                    <i class="fa fa-eye"></i>{{ langue.form_consulter }}</a>
                            </li>
                            <li class="menus" data-iden="10">
                                <a href="#">
                                    <i class="glyphicon glyphicon-cog"></i>{{ langue.form_reglages }}</a>
                            </li>
                        </ul>
                    </li>

                    <li class="menus" data-iden="2">
                        <a href="{{ baseurl }}/Member/courrier/{{lang_abbr}}" class="" style="font-size: 0.9em; text-align: left">
                            <i class="fa fa-envelope"></i>
                            <span>{{ langue.form_courrier_box }}</span>

                            <small class="label pull-right bg-yellow" style="font-size: .8em">0</small>
                            <small class="label pull-right bg-green" style="font-size: .8em">0</small>
                            <small class="label pull-right bg-red" style="font-size: .8em">0</small>

                        </a>
                    </li>

                    <li class="menus {%if request.resolver_match.view_name == 'Messagerie' %}active{%endif%}" data-iden="3">
                        <a href="{{baseurl}}/Member/chat/{{lang_abbr}}" class="" style="font-size: 0.9em; text-align: left">
                            <i class="fa fa-comments-o"></i>
                            <span>{{ langue.form_messages }}</span>
                            <small class="label pull-right bg-yellow" style="font-size: .8em">0</small>
                        </a>
                    </li>

                    <li class="treeview menus  {%if request.resolver_match.view_name == 'Documents' %}active{%endif%}" data-iden="4">
                        <a href="#" class="" style="font-size: 0.9em; text-align: left">
                            <i class="fa fa-file-word-o"></i>
                            <span>{{ langue.form_Documents }}</span>
                            <span class="label pull-right bg-red" style="font-size: .8em">0</span>
                            <span class="pull-right-container">
                                <i class="fa fa-angle-left pull-right"></i>
                            </span>
                        </a>
                        <ul class="treeview-menu">
                            <li class="menus" data-iden="13">
                                <a href="{{ baseurl }}/Member/addDocx/{{ lang_abbr }}">
                                    <i class="fa fa-plus"></i>{{ langue.form_nouvelle }}</a>
                            </li>
                            <li class="menus" data-iden="14">
                                <a href="{{ baseurl }}/Member/documents/{{lang_abbr}}">
                                    <i class="fa fa-eye"></i>{{ langue.form_consulter }}</a>
                            </li>
                            <li class="menus" data-iden="0">
                                <a href="#">
                                    <i class="glyphicon glyphicon-cog"></i>{{ langue.form_reglages }}</a>
                            </li>
                        </ul>
                    </li>

                    <li class="treeview menus {%if request.resolver_match.view_name == 'Archives' %}active{%endif%}" data-iden="5">
                        <a href="#" class="" style="font-size: 0.9em; text-align: left">
                            <i class="fa  fa-archive"></i>
                            <span>{{ langue.form_archives }}</span>
                            <span class="label pull-right bg-blue" style="font-size: .8em">0</span>
                            <span class="pull-right-container">
                                <i class="fa fa-angle-left pull-right"></i>
                            </span>
                        </a>
                        <ul class="treeview-menu">
                            <li class="menus" data-iden="0">
                                <a href="#">
                                    <i class="fa fa-plus"></i>{{ langue.form_nouvelle }}</a>
                            </li>
                            <li class="menus" data-iden="0">
                                <a href="#">
                                    <i class="fa fa-eye"></i>{{ langue.form_consulter }}</a>
                            </li>
                            <li class="menus" data-iden="0">
                                <a href="#">
                                    <i class="glyphicon glyphicon-cog"></i>{{ langue.form_reglages }}</a>
                            </li>
                        </ul>
                    </li>

                    <li class="menus {%if request.resolver_match.view_name == 'Statistiques' %}active{%endif%}" data-iden="6">
                        <a href="{{ baseurl }}/dashboard/courriers/{{ lang_abbr }}" class="" style="font-size: 0.9em; text-align: left">
                            <i class="fa fa-bar-chart"></i>
                            <span>{{ langue.form_Statistiques }}</span>
                            <small class="label pull-right bg-blue" style="font-size: .8em"></small>
                        </a>
                    </li>

                    <li class="treeview menus {%if request.resolver_match.view_name == 'Dossiers' %}active{%endif%}" data-iden="15">
                        <a href="#" class="" style="font-size: 0.9em; text-align: left">
                            <i class="fa fa-file"></i>
                            <span>{{ langue.form_Dossiers }}</span>
                            <span class="label pull-right bg-green" style="font-size: .8em">0</span>
                            <span class="pull-right-container">
                                <i class="fa fa-angle-left pull-right"></i>
                            </span>
                        </a>
                        <ul class="treeview-menu">
                            <li class="menus" data-iden="16">
                                <a href="#" data-toggle="modal" data-target="#addDossier" data-dos="0">
                                    <i class="fa fa-plus"></i>{{ langue.form_nouvelle }}</a>
                            </li>
                            <li class="menus" data-iden="17">
                                <a href="{{ baseurl }}/Member/dossiers/{{ lang_abbr }}">
                                    <i class="fa fa-eye"></i>{{ langue.form_consulter }}</a>
                            </li>
                            <li class="menus" data-iden="0">
                                <a href="#">
                                    <i class="glyphicon glyphicon-cog"></i>{{ langue.form_reglages }}</a>
                            </li>
                        </ul>
                    </li>

                    <li class="menus {%if request.resolver_match.view_name == 'Outils Avances' %}active{%endif%}" data-iden="19">
                        <a href="{{ baseurl }}/Member/outils_Avances/{{ lang_abbr }}" class="" style="font-size: 0.9em; text-align: left">
                            <i class="fa fa-list"></i>
                            <span>Outils Avancés</span>
                            <span class="label pull-right bg-green" style="font-size: .8em">0</span>
                        </a>
                    </li>

                    <li class="menus {%if request.resolver_match.view_name == 'Configuration' %}active{%endif%}" data-iden="18">
                        <a href="{{ baseurl }}/Member/configuration/{{ lang_abbr }}" class="" style="font-size: 0.9em; text-align: left">
                            <i class="fa fa-list"></i>
                            <span>Configuration</span>
                            <span class="label pull-right bg-info" style="font-size: .8em"></span>
                        </a>
                    </li>

                    <li class="">
                        <a class="text-center btn btn-primary" style="font-size: 0.9em;" href="{{ baseurl }}/dashboard/documentation/{{ lang_abbr }}">
                            <i class="fa fa-book" style="font-size: 1em; margin-left:-30px"></i>
                            <span>Documentation</span>
                        </a>
                    </li>
                </ul>

                <!-- /.sidebar-menu -->
            </section>
            <!-- /.sidebar -->
        </aside>

        {% block content %} {% endblock %}



        <div class="modal modal-default fade" id="addUsers">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <button type="button" class="btn btn-danger pull-right" data-dismiss="modal">
                                <i class="fa fa-power-off"></i>
                            </button>
                        </button>
                        <h4 class="modal-title">{{ langue.form_utilisateurs }}</h4>
                    </div>
                    <div class="modal-body">
                        <!-- general form elements -->
                        <div class="box">
                            <div class="box-header with-border">
                                <h3 class="box-title">{{ langue.form_champ_obligatoire }}</h3>
                            </div>
                            <!-- /.box-header -->
                            <!-- form start -->
                            <form role="form" method="POST" action="{{ baseusrl }}/dashboard/admin/addUser" id="addUseruser">
                                {% csrf_token %}
                                <div class="box-body">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">{{ langue.form_nom }}</label>
                                            <input type="text" required name="nom" class="form-control" id="exampleInputEmail1" placeholder="{{ langue.form_nom }}" />
                                        </div>

                                        <div class="form-group">
                                            <label for="exampleInputEmail1a">{{ langue.form_prenom }}</label>
                                            <input type="text" required name="prenom" class="form-control" id="exampleInputEmail1a" placeholder="{{ langue.form_prenom }}"
                                            />
                                        </div>

                                        <div class="form-group">
                                            <label for="exampleInputEmaila">{{ langue.form_email }}</label>
                                            <input type="email" required name="email" class="form-control" id="exampleInputEmaila" placeholder="{{ langue.form_email }}"
                                            />
                                        </div>
                                        <!-- phone mask -->
                                        <div class="form-group">
                                            <label>Numero Téléphone: </label>
                                            <div class="input-group">
                                                <div class="input-group-addon">
                                                    <i class="fa fa-phone"></i>
                                                </div>
                                                <input type="text" required name="tel" class="form-control" data-inputmask='"mask": "(999) 999-99-99-99"' data-mask/>
                                            </div>
                                            <!--/.input group -->
                                        </div>
                                        <!-- /.form group -->
                                    </div>

                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1an">Login</label>
                                            <input type="text" required name="login" class="form-control" id="exampleInputEmail1an" placeholder="login" />
                                        </div>

                                        <div class="form-group">
                                            <label for="exampleInputEmail1an">{{ langue.form_Cicursale }}</label>
                                            <select name="cic" class="form-control select2" required id="exampleInputEmail1an" style="width: 100%;">
                                                <option selected value="{{ userInfo.cic }}">{{ userInfo.cic__ville }} ({{ userInfo.cic__pays }})</option>
                                            </select>
                                        </div>

                                        <div class="form-group">
                                            <label for="exampleInputEmail1amn">{{ langue.form_user }}</label>
                                            <select name="typ" class="form-control select2" required id="exampleInputEmail1amn" style="width: 100%;">
                                                {% for elmts in typuserlist %}
                                                <option value="{{ elmts.id }}">{{ elmts.libeler }} ({{ elmts.code }})</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label for="exampleInputEmail1assn">{{ langue.form_fonction }}</label>
                                            <input type="text" required name="role" class="form-control" id="exampleInputEmail1assn" placeholder="{{ langue.form_fonction }}"
                                            />
                                        </div>
                                    </div>
                                </div>
                                <!-- /.box-body -->

                                <div id="reponses" class="row">

                                </div>

                                <div class="box-footer" id="push">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fa fa-save"></i>&nbsp; {{ langue.form_Enregistrer }}</button>
                                    <a href="{{baseurl}}/dashboard/company/users/{{lang_abbr}}">
                                        <button type="button" class="btn btn-default pull-right">
                                            <i class="fa fa-eye"></i>&nbsp; {{ langue.form_consulter }}</button>
                                    </a>
                                </div>
                            </form>
                        </div>
                        <!-- /.box -->
                    </div>
                    <div class="modal-footer">

                    </div>
                </div>
                <!-- /.modal-content -->
            </div>
            <!-- /.modal-dialog -->
        </div>
        <!-- /.modal -->


        <div class="modal modal-default fade" id="addDossier">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <button type="button" class="btn btn-danger pull-right" data-dismiss="modal">
                                <i class="fa fa-power-off"></i>
                            </button>
                        </button>
                        <h4 class="modal-title">{{ langue.form_Dossiers }}</h4>
                    </div>
                    <div class="modal-body">
                        <!-- general form elements -->
                        <div class="box box-primary">
                            <div class="box-header with-border">

                            </div>
                            <!-- /.box-header -->
                            <!-- form start -->
                            <form role="form" method="POST" action="{{ baseusrl }}/dashboard/addDossier" class="addElemt">
                                {% csrf_token %}
                                <div class="box-body">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1">{{ langue.form_libeller }}</label>
                                            <input type="text" required name="libelle" class="form-control" id="exampleInputEmail1" placeholder="{{ langue.form_libeller }}"
                                            />
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="exampleInputEmail1an">{{ langue.form_abbr }}</label>
                                            <input type="text" required name="abreviation" class="form-control" id="exampleInputEmail1an" placeholder="{{ langue.form_abbr }}"
                                            />
                                        </div>
                                        <input type="hidden" required name="cic" value="{{ userInfo.cic }}" />
                                        <input type="hidden" id="sdossierdOS" name="dos" value="" />
                                    </div>
                                </div>
                                <input type="hidden" required id="note" value="{{ langue.form_dossier_ajouter_succes }}" />
                                <!-- /.box-body -->

                                <div id="reponses" class="row">

                                </div>

                                <div class="box-footer" id="push">
                                    <div class="col-md-12">
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fa fa-save"></i>&nbsp; {{ langue.form_Enregistrer }}</button>
                                        <a href="{{baseurl}}/Member/dossiers/{{lang_abbr}}">
                                            <button type="button" class="btn btn-default pull-right">
                                                <i class="fa fa-eye"></i>&nbsp; {{ langue.form_consulter }}</button>
                                        </a>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <!-- /.box -->
                    </div>
                    <div class="modal-footer">

                    </div>
                </div>
                <!-- /.modal-content -->
            </div>
            <!-- /.modal-dialog -->
        </div>
        <!-- /.modal -->


        <div class="col-md-3 col-xs-12 col-sm-6 blocMiniChat" style="position: fixed; right: 0; bottom: 0; margin-bottom: -25px; z-index:99">
            <!-- DIRECT CHAT WARNING -->
            <div class="box box-primary direct-chat card z-depth-2 direct-chat-primary">
                <div class="box-header with-border" style=" height: 35px;">
                    <h3 class="box-title hidden-xs">
                        <a id="messegerLink" href="{{baseurl}}/Member/chat/{{lang_abbr}}" style="color:#777; font-size:0.7em">
                            <b id="messeger"></b>
                        </a>
                    </h3>

                    <div class="box-tools pull-right">
                        <span data-toggle="tooltip" title="3 New Messages" class="badge bg-yellow">3</span>
                        <button type="button" class="btn btn-box-tool btnMinus btn-primary" data-widget="collapse" style="margin-top: -4px;">
                            <i class="fa fa-minus"></i>
                        </button>
                        <button type="button" class="btn btn-box-tool btn-success btnListContact" data-toggle="tooltip" title="Contacts" data-widget="chat-pane-toggle"
                            style="margin-top: -4px">
                            <i class="fa fa-comments"></i>
                        </button>
                        <!--<button type="button" class="btn btn-box-tool" data-widget="remove">
                                        <i class="fa fa-times"></i>
                                    </button>-->
                    </div>
                </div>
                <!-- /.box-header -->
                <div class="box-body">
                    <!-- Conversations are loaded here -->
                    <div class="direct-chat-messages">

                    </div>
                    <!--/.direct-chat-messages-->

                    <!-- Contacts are loaded here -->
                    <div class="direct-chat-contacts">
                        <ul class="contacts-list">
                            {% for user in userList %} {% if request.session.d_userid != user.id %}
                            <li class="list-group-item userDirectChat" style="margin-bottom: 0px; border-radius: 0px;" id="{{user.id}}">
                                <a href="#">
                                    <img class="profile-user-img img-responsive img-circle" src="{% if user.photo != '0' %}{{ baseurl }}/{{ user.photo }}{% else %}http://esrilanka.org/mcqpal/backend/dist/img/user2-160x160.png{% endif %}"
                                        alt="DOTrack" style="width: 37px;float: left;margin-top: -8px;margin-right:5px;">
                                    <b>{{user.prenom}}&nbsp;{{user.nom}}</b>
                                </a>
                            </li>
                            {% endif %} {% endfor %}
                        </ul>
                        <!-- /.contatcts-list -->
                    </div>
                    <!-- /.direct-chat-pane -->
                    {% if request.session.d_memberid %} {% else %}
                    <div class="overlay" style="position: absolute; top:0; bottom:0; left:0; right:0;border-radius:0px; background: linear-gradient(rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.9))">
                        <i class="fa fa-refresh fa-spin" style="color: #fff"></i>
                        <center>
                            <p style="margin-top: 57px; color: #fff">
                                <b>{{ langue.form_accederaunecicursale }} :</b>
                                <br>
                                <a href="#" class="btn btn-xs btn-primary" data-toggle="modal" data-target="#viewCicursale">
                                    {{ langue.form_consulter }}
                                    <i class="fa fa-arrow-circle-right"></i>
                                </a>
                            </p>
                        </center>
                    </div>
                    {% endif %}
                </div>
                <!-- /.box-body -->
                <div class="box-footer">
                    <form action="{{ baseurl }}/Member/chatValidate" method="post" id="chatValidate2">
                        <div class="">
                            {% csrf_token %}
                            <input type="hidden" value="001" class="fro" required name="useid2" id="iddirectchat" />
                            <input type="hidden" class="form-control fro" id="use_id1" required name="use" value="1" />
                            <input type="text" name="libelle" autocomplete="off" required id="inputChat" placeholder="&#xf118; Votre message ici ! ..."
                                class="form-control fa fro" style="border:0px; width:100%; border-bottom:1px solid #f5f5f5" />
                            <span class="input-group-btn hidden">
                                <button type="submit" class="btn btn-success fro">
                                    <i class="glyphicon glyphicon-arrow-right"></i>
                                </button>
                            </span>
                        </div>
                    </form>

                    <h4 style="margin-left:10px;">
                        <a class="messThumb" data-value="&#xf087;">
                            <i class="fa fa-thumbs-o-up text-blue"></i>
                        </a> &nbsp;
                        <a class="messThumb" data-value="&#xf165;">
                            <i class="fa fa-thumbs-o-down text-blue"></i>
                        </a> &nbsp;
                        <a>
                            <i class="fa fa-image text-red" data-toggle="tooltip" title="Images"></i>
                        </a>
                        &nbsp;
                        <a>
                            <i class="fa fa-paperclip" style="" data-toggle="tooltip" title="Files"></i>
                        </a>
                        &nbsp;
                        <a class="messThumb" data-value="&#xf002;">
                            <i class="fa fa-frown-o" data-toggle="tooltip" title="Angry"></i>
                        </a>
                        &nbsp;
                        <a class="messThumb" data-value="&#xf118;">
                            <i class="fa fa-smile-o" data-toggle="tooltip" title="Smile"></i>
                        </a>
                        &nbsp;
                        <a>
                            <i class="fa fa-microphone" data-toggle="tooltip" title="Voice"></i>
                        </a>
                    </h4>
                </div>
                <!-- /.box-footer-->
            </div>
            <!--/.direct-chat -->
        </div>
        <!-- /.col -->


        <!--Footer-->
        <footer class="main-footer page-footer font-small blue pt-4 card z-depth-2 mt-4 card" style="font-size: 1.1em; min-height: 150px;">
            <!--Footer Links-->
            <div class="container-fluid text-left text-md-left" style="min-height:150px;">
                <div class="row">

                    <!--First column-->
                    <div class="col-md-6 hidden">
                        <h5 class="text-uppercase">
                            <b>DOTrack Infos</b>
                        </h5>
                        <p>DOTrack vos procure assurance, flexibite, securite dans l'excution et le traitement de vos Documents
                            . DOTrack est votre solution tout en un (chat, courrier, travail collaboratif, ...)</p>
                    </div>
                    <!--/.First column-->

                    <!--Second column-->
                    <div class="col-md-12">
                        <center>
                            <h5 class="text-uppercase">
                                <b>Besoin D'assistance ?</b>
                                <br>
                                <br>
                            </h5>
                            <ul class="list-unstyled">
                                <li>
                                    <a href="#!" class="btn btn-primary">Contacter sur Facebook</a>

                                    <a href="#!" class="btn btn-danger">Contacter sur Google plus</a>

                                    <a href="#!" class="btn btn-success">Contacter le web Master</a>
                                </li>
                            </ul>
                        </center>
                    </div>
                    <!--/.Second column-->
                </div>
            </div>
            <!--/.Footer Links-->

            <!--Copyright-->
            <div class="footer-copyright py-3 text-center card" style="margin-top: 1px; margin-bottom: 15px; font-size: 0.9em; padding:8px">
                <strong>Copyright
                    <script>document.write(new Date().getFullYear());</script> All rights reserved |
                    <a href="#" style="color: papayawhip;">DOTrack</a>
                    <i class="fa fa-heart-o" aria-hidden="true"></i> by ZonePluS
            </div>
            <!--/.Copyright-->

        </footer>
        <!--/.Footer-->

        <style>
            #control-sidebar-theme-demo-options-tab,
            .fa-wrench {
                display: none;
            }
        </style>

        <!-- Control Sidebar -->
        <aside class="control-sidebar control-sidebar-dark">
            <!-- Create the tabs -->
            <ul class="nav nav-tabs nav-justified control-sidebar-tabs">
                <li class="active">
                    <a href="#control-sidebar-home-tab" data-toggle="tab">
                        <i class="fa fa-home"></i>
                    </a>
                </li>
                <li>
                    <a href="#control-sidebar-settings-tab" data-toggle="tab">
                        <i class="fa fa-gears"></i>
                    </a>
                </li>
            </ul>
            <!-- Tab panes -->
            <div class="tab-content">
                <!-- Home tab content -->
                <div class="tab-pane active" id="control-sidebar-home-tab">
                    <h3 class="control-sidebar-heading">Activites recentes</h3>
                    <ul class="control-sidebar-menu">
                        <li>
                            <a href="javascript:;" id="modeMICro" class="">
                                <i class="fa fa-microphone"></i>
                                Mode Micro
                            </a>
                        </li>
                        <li id="STOPmodeMICro">
                            <a href="javascript:;" class="btn btn-danger">
                                <i class="fa fa-close"></i>
                                Arreter le Micro
                            </a>
                        </li>
                        <li>
                            <a href="javascript:;" class="badge badge-info">
                                Aucune activite
                            </a>
                        </li>
                    </ul>
                    <!-- /.control-sidebar-menu -->

                </div>
                <!-- /.tab-pane -->
                <!-- Settings tab content -->
                <div class="tab-pane" id="control-sidebar-settings-tab">
                    <form method="post">
                        <h3 class="control-sidebar-heading">Parametres Generaux</h3>

                        <div class="form-group">

                        </div>
                        <!-- /.form-group -->
                    </form>
                </div>
                <!-- /.tab-pane -->
            </div>
        </aside>
        <div id="SongNotif" style="position:fixed; left:-10000px; visibility:hidden"></div>
        <!-- /.control-sidebar -->
        <!-- Add the sidebar's background. This div must be placed
      immediately after the control sidebar -->
        <div class="control-sidebar-bg"></div>

        <button id="messModalbtn" data-target="#messModal" data-toggle="modal" style="visibility: hidden; position: fixed; left:0; bottom: 0"></button>
        <div class="modal fade" role="dialog" id="messModal">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="modalHead">
                        </h4>
                    </div>
                    <div class="modal-body" id="modalBody">

                    </div>
                </div>
            </div>
        </div>

        <button id="deconnexionModalbtn" data-target="#messModal2" data-toggle="modal" style="visibility: hidden; position: fixed; left:0; bottom: 0"></button>
        <div class="modal fade" role="dialog" id="messModal2">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">
                            <center>
                                Alert ! Vous etes sur le point de fermer votre session.
                            </center>
                        </h4>
                    </div>
                    <div class="modal-body">
                        <center>
                            <img id="clickTolockScreen" class="card" src="{% static 'dotracks/img/pause.png' %}" style="width:40px; height:40px; border-radius:50%; margin-top:-3px; cursor:pointer"
                            />
                            <img id="clickToDeconnect" class="card" src="{% static 'dotracks/img/off.png' %}" style="width:40px; height:40px; border-radius:50%; margin-top:-3px; margin-left:15px; cursor:pointer"
                            />
                        </center>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="row" id="newNotifMess" style="position:fixed; left:0; top:0; right:0; bottom:0; z-index:999999; background:linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.7))">
        <a href="#">
            <div class="col-md-3 col-sm-6 col-xs-12" style="position: absolute; bottom:0">
                <div class="info-box">
                    <span class="info-box-icon bg-aqua">
                        <i class="fa fa-envelope-o"></i>
                    </span>

                    <div class="info-box-content">
                        <span class="info-box-text">Nouveau Message</span>
                        <span class="info-box-number" style="font-weight:normal;">
                            <small style="font-size:0.7em">jkad jsadasd kasdhjk ljasjdkd jsalkdajs dkas</small>
                        </span>
                    </div>
                    <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
            </div>
        </a>
    </div>

    <div class="row" id="newNotifMicro" style="position:fixed; left:0; top:0; right:0; bottom:0; z-index:999999; background:linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.7))">
        <a href="#">
            <div class="col-md-3 col-sm-6 col-xs-12" style="position: absolute; bottom:0">
                <div class="info-box">
                    <span class="info-box-icon bg-aqua">
                        <i class="fa fa-microphone"></i>
                    </span>

                    <div class="info-box-content">
                        <span class="info-box-text">Micro en Marche</span>
                        <span class="info-box-number" style="font-weight:normal;">
                            <small style="font-size:0.7em">Utilisez le micro en mode DJ</small>
                        </span>
                    </div>
                    <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
            </div>
        </a>
    </div>

    <div id="defaultSessionMicro">
    </div>

    <div id="oo" class="hidden">
        {{ editDocument.descipt }}
    </div>


    <!-- ./wrapper -->

    <!-- REQUIRED JS SCRIPTS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ionicons/4.2.4/ionicons.js"></script>

    <!-- jQuery 3 -->
    <script src="{% static 'dotracks/js_/jquery.min.js' %}"></script>
    <!-- Bootstrap 3.3.7 -->
    <script src="{% static 'dotracks/js_/bootstrap.min.js' %}"></script>

    <script src="{% static 'dotracks/jquery-cropper-master/dist/cropper.js' %}"></script>
    <script src="{% static 'dotracks/jquery-cropper-master/dist/jqueryCropper.js' %}"></script>

    <script src="{% static 'dotracks/js_/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'dotracks/js_/dataTables.bootstrap.min.js' %}"></script>
    <!-- Select2 -->
    <script src="{% static 'dotracks/js_/select2.full.min.js' %}"></script>
    <!-- Morris.js charts -->
    <script src="{% static 'dotracks/js_/raphael.min.js' %}"></script>
    <script src="{% static 'dotracks/js_/morris.min.js' %}"></script>
    <!-- Sparkline -->
    <script src="{% static 'dotracks/js_/jquery.sparkline.min.js' %}"></script>
    <!-- jvectormap  -->
    <script src="{% static 'dotracks/js_/jquery-jvectormap-1.2.2.min.js' %}"></script>
    <script src="{% static 'dotracks/js_/jquery-jvectormap-world-mill-en.js' %}"></script>
    <!-- SlimScroll -->
    <script src="{% static 'dotracks/js_/jquery.slimscroll.min.js' %}"></script>
    <!-- FastClick -->
    <script src="{% static 'dotracks/js_/fastclick.js' %}"></script>
    <!-- AdminLTE App -->
    <script src="{% static 'dotracks/js_/adminlte.min.js' %}"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="{% static 'dotracks/js_/demo.js' %}"></script>
    <!-- Select2 -->
    <script src="{% static 'dotracks/js_/select2.full.min.js' %}"></script>
    <!-- InputMask -->
    <script src="{% static 'dotracks/js_/jquery.inputmask.js' %}"></script>
    <script src="{% static 'dotracks/js_/jquery.inputmask.date.extensions.js' %}"></script>
    <script src="{% static 'dotracks/js_/jquery.inputmask.extensions.js' %}"></script>
    <!-- iCheck 1.0.1 -->
    <script src="{% static 'dotracks/js_/icheck.min.js' %}"></script>

    <script src="{% static 'dotracks/js_/ckeditor/ckeditor.js' %}"></script>
    <!-- Bootstrap WYSIHTML5 -->
    <script src="{% static 'dotracks/js_/bootstrap3-wysihtml5.all.min.js' %}"></script>

    <!-- Optionally, you can add Slimscroll and FastClick plugins.
         Both of these plugins are recommended to enhance the
         user experience. -->

    <script src="{% static 'dotracks/js_/mdb.min.js' %}"></script>
    <script src="{% static 'dotracks/js_/popper.min.js' %}"></script>

    <script>
        /*navigator.mediaDevices.getUserMedia({ audio: true })
            .then(stream => {
                const mediaRecorder = new MediaRecorder(stream);
                mediaRecorder.start();

                const audioChunks = [];
                mediaRecorder.addEventListener("dataavailable", event => {
                    audioChunks.push(event.data);
                });

                mediaRecorder.addEventListener("stop", () => {
                    const audioBlob = new Blob(audioChunks);
                    const audioUrl = URL.createObjectURL(audioBlob);
                    const audio = new Audio(audioUrl);
                    audio.play();
                });

                setTimeout(() => {
                    mediaRecorder.stop();
                }, 4000);
            });*/
    </script>

    <script>
        wow = new WOW({
            boxClass: 'wow', // default
            animateClass: 'animated', // default
            offset: 0, // default
            mobile: true, // default
            live: true // default
        })
        wow.init();

        $(function () {
            //Initialize Select2 Elements
            $('.select2').select2()
            //Money Euro
            $('[data-mask]').inputmask()

            // var df = $('#defaultckEDITOR').()

            CKEDITOR.replace('doctextarea')
            CKEDITOR.config.height = "50em"

            //Flat red color scheme for iCheck
            $('input[type="checkbox"].flat-red, input[type="radio"].flat-red').iCheck({
                checkboxClass: 'icheckbox_flat-green',
                radioClass: 'iradio_flat-green'
            })
        })
    </script>doctextarea {% if editDocument %}
    <script>
        $(function () {
            var data = $('#oo').text()
            CKEDITOR.instances.doctextarea.setData(data)
        })
    </script> {% else %}
    <script>
        $(function () {
            CKEDITOR.instances.doctextarea.setData('<h1><u>Heading Of the Text</u></h1><h4>Subheading</h4><p>But I must explain to you how all this mistaken idea of denouncing pleasure and praising pain was born and I will give you a complete account of the system, and expound the actual teachings of the great explorer of the truth,the master-builder of human happiness. No one rejects, dislikes, or avoids pleasure itself, t ...</p><ul><li>List item one</li><li>List item two</li></ul><p>Thank you,</p><p>John Doe</p><table border="1" cellpadding="1" cellspacing="1" style="width:500px"><tbody><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table>')
        })
    </script> {% endif %}
    <script>
        $(document).ready(function () {

            $('.delete').on('click', function (e) {
                var $this = $(this)
                e.preventDefault()
                if (confirm("Voulez vous vraimant supprimer cet element ?")) {
                    var link = $this.attr('href')
                    var id = $(this).attr('id')

                    $.ajax({
                        type: 'POST',
                        url: link,
                        data: { 'id': id, 'csrfmiddlewaretoken': '{{ csrf_token }}' },
                        dataType: 'json',
                        success: function (data) {
                            if (data == 0) {

                            } else {

                            }
                        }
                    });
                } else {
                    return false;
                }
            })

            $('.viewsFile').on('click', function () {
                var id = $(this).attr('data-id')
                var ext = $(this).attr('data-type')

                if (ext == 'pdf') {
                    $('#divdocx').fadeIn('slow')
                    $('#contentdocx').html('<center><img src="{% static "dotracks/img/preloader.gif" %}" style="width: 130px; height: 130px; border-radius: 50%;"/><h2>Patientez Pendant l\'ouverture du Document...</h2></center>')
                    $.ajax({
                        url: "{{ baseusrl }}/Member/viewsOpenFiles/",
                        type: "POST",
                        data: { 'id': id, 'exts': ext, 'csrfmiddlewaretoken': '{{ csrf_token }}' },
                        success: function (data) {
                            if (data === '0') {

                            } else {
                                $('#contentdocx').html('<textarea id="docpreview" required class="form-control" style="height:500px; width:100%"></textarea>')
                                CKEDITOR.replace('docpreview')
                                CKEDITOR.config.height = "55em"
                                CKEDITOR.config.readOnly = true
                                CKEDITOR.instances.docpreview.setData(data)
                            }
                        }
                    });
                }

                if (ext == 'html') {
                    $('#divdocx').fadeIn('slow')
                    $('#contentdocx').html('<center><img src="{% static "dotracks/img/preloader.gif" %}" style="width: 130px; height: 130px; border-radius: 50%;"/><h2>Patientez Pendant l\'ouverture du Document...</h2></center>')
                    $.ajax({
                        url: "{{ baseusrl }}/Member/viewsFilesOpen/",
                        type: "POST",
                        data: { 'id': id, 'exts': ext, 'csrfmiddlewaretoken': '{{ csrf_token }}' },
                        success: function (data) {
                            if (data === '0') {

                            } else {
                                $('#contentdocx').html('<textarea id="docpreview" required class="form-control" style="height:500px; width:100%"></textarea>')
                                CKEDITOR.replace('docpreview')
                                CKEDITOR.config.height = "55em"
                                CKEDITOR.config.readOnly = true
                                CKEDITOR.instances.docpreview.setData(data)
                            }
                        }
                    });
                }

                if (ext == 'txt' || ext == "csv") {
                    $('#divdocx').fadeIn('slow')
                    $('#contentdocx').html('<center><img src="{% static "dotracks/img/preloader.gif" %}" style="width: 130px; height: 130px; border-radius: 50%;"/><h2>Patientez Pendant l\'ouverture du Document...</h2></center>')
                    $.ajax({
                        url: "{{ baseusrl }}/Member/viewsFilesOpen/",
                        type: "POST",
                        data: { 'id': id, 'exts': ext, 'csrfmiddlewaretoken': '{{ csrf_token }}' },
                        success: function (data) {
                            //alert(data)
                            if (data === '0') {
                                $('#contentdocx').html("<h3><center>Echec lors du Chargement du Fichier</center></h3>")
                                if (ext === "csv") {
                                    $('#contentdocx').append('<center><h5>Telechargez le fichier pour le consulter sur votre machine</h5><a class="btn btn-primary">Telecharger</a></center>')
                                }

                            } else {
                                $('#contentdocx').html('<div>' + data + '</div>')

                            }
                        }
                    });
                }

                if (ext == 'docx' || ext == 'doc') {
                    $('#divdocx').fadeIn('slow')
                    $('#contentdocx').html('<center><img src="{% static "dotracks/img/preloader.gif" %}" style="width: 130px; height: 130px; border-radius: 50%;"/><h2>Patientez Pendant l\'ouverture du Document...</h2></center>')
                    $.ajax({
                        url: "{{ baseusrl }}/Member/viewsFilesOpen/",
                        type: "POST",
                        data: { 'id': id, 'exts': ext, 'csrfmiddlewaretoken': '{{ csrf_token }}' },
                        success: function (data) {
                            if (data === '0') {

                            } else {
                                $('#contentdocx').html(data)
                            }
                        }
                    });
                }

                $('#closeModalDocx').on('click', function () {
                    $('#divdocx').fadeOut('slow')
                })
            })

            $('#modeMICro').on('click', function () {
                djMicrophone()
                $('#newNotifMicro').fadeIn()
                $('#newNotifMicro').on('click', function () {
                    $(this).fadeOut()
                })
                $('#STOPmodeMICro').fadeIn()
                $('#STOPmodeMICro').on('click', function () {
                    window.location.reload()
                })
            })

            $('#detailsOpenDoc').attr('', function () {
                var val = $(this).attr('data-valu')
                $(this).html(val)
            })

            $('.widthStatic').css({ 'heigth': '100px' })

            $('#saveDoc').on('submit', function (e) {
                e.preventDefault()
                var ele = CKEDITOR.instances.doctextarea.getData();
                if (ele != "") {
                    $('#moreInfo').click()
                } else {
                    $('#modalHead').html("Operation annuler")
                    $('#modalBody').html("<h4>Le Champ de saisie ne doit pas etre vide.</h4>")
                    $('#messModalbtn').click()
                }
            });

            $('#savedocUPDATE').on('click', function () {
                var ele = CKEDITOR.instances.doctextarea.getData();
                var data = $('#oo').html()
                if (confirm("Voulez vous vraimant modifier cet element ?")) {
                    //$('#moreInfo').click()
                } else {
                    $('#modalHead').html("Operation annuler")
                    $('#modalBody').html("<h4>Aucune modification n'a ete opporter au document.</h4>")
                    $('#messModalbtn').click()
                }
            })

            function chooseSAVEdosCl() {
                $('.openSAVEsdos2').on('click', function () {
                    var $this = $('#saveDOSlist')

                    $this.html('<div class="col-md-12 alert text-center" style="background: #f5f5f5; padding:1px; color:#444;margin-top:10px;"><center><img src="{% static "dotracks/img/preloader.gif" %}" style="width: 80px; height: 80px; border-radius: 50%;"/></center></div>')
                    var id = $(this).attr('data-id')
                    $.ajax({
                        type: 'POST',
                        url: "{{ baseusrl }}/Member/ChooseDossierSucById",
                        data: { 'cic': '{{ userInfo.cic }}', 'dos': id, 'csrfmiddlewaretoken': '{{ csrf_token }}' },
                        //contentType: "application/json",
                        dataType: 'json',
                        success: function (data) {
                            if (data == 0) {
                                $this.html('<div class="callout callout-warning" style="margin-top: 5px;"><h5>{{ langue.form_aucunedonne}}</h5></div>')
                            } else {
                                $this.html("")
                                for (i in data) {
                                    $this.append('<div class="col-md-3 col-sm-4 col-xs-6" style="position: relative;"><div class="btn-group">'
                                        + '<span class="badge dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="float:right; cursor:pointer; margin-bottom:-10px; background:#fff;">'
                                        + '<i class="fa fa-angle-down" style="color:#333;"></i></span><div class="dropdown-menu" style="font-size:0.8em; padding:8px; width:40px">'
                                        + '<a class="dropdown-item openSAVEsdos2" href="#" data-id="' + data[i].id + '">'
                                        + '<i class="fa fa-eye"></i> Ouvrir</a><br><br>'
                                        + '<a class="dropdown-item SAVEdosChoose" href="#" data-id="' + data[i].id + '">'
                                        + '<i class="fa fa-check"></i> Choisir</a><div class="dropdown-divider"></div></div></div><div class="box box-widget widget-user" style=" cursor:pointer; float: left;"><center>'
                                        + '<img src="{% static "dotracks/img/folder.png" %}" alt="" style="width: 80%; margin-top: 10px;" class="img-responsive">'
                                        + '</center><p style="float: left;"><center style="font-weight:bold;margin-bottom: 2px;">' + data[i].libelle + '</center></p></div></div>');
                                }

                                SAVEdosChooseCl()

                                chooseSAVEdosCl()
                            }
                        }
                    })
                })
            }


            $('#chooseSAVEdos').on('click', function () {
                var $this = $('#saveDOSlist')

                $this.html('<div class="col-md-12 alert text-center" style="background: #f5f5f5; padding:1px; color:#444;margin-top:10px;"><center><img src="{% static "dotracks/img/preloader.gif" %}" style="width: 80px; height: 80px; border-radius: 50%;"/></center></div>')

                $.ajax({
                    type: 'POST',
                    url: "{{ baseusrl }}/Member/ChooseDossierBySuc",
                    data: { 'cic': '{{ userInfo.cic }}', 'csrfmiddlewaretoken': '{{ csrf_token }}' },
                    //contentType: "application/json",
                    dataType: 'json',
                    success: function (data) {
                        if (data == 0) {
                            $this.html('<div class="callout callout-warning" style="margin-top: 5px;"><h5>{{ langue.form_aucunedonne}}</h5></div>')
                        } else {
                            $this.html("")
                            for (i in data) {
                                $this.append('<div class="col-md-3 col-sm-4 col-xs-6" style="position: relative;"><div class="btn-group">'
                                    + '<span class="badge dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="float:right; cursor:pointer; margin-bottom:-10px; background:#fff;">'
                                    + '<i class="fa fa-angle-down" style="color:#333;"></i></span><div class="dropdown-menu" style="font-size:0.8em; padding:8px; width:40px">'
                                    + '<a class="dropdown-item openSAVEsdos2" href="#" data-id="' + data[i].id + '">'
                                    + '<i class="fa fa-eye"></i> Ouvrir</a><br><br>'
                                    + '<a class="dropdown-item SAVEdosChoose" href="#" data-id="' + data[i].id + '">'
                                    + '<i class="fa fa-check"></i> Choisir</a><div class="dropdown-divider"></div></div></div><div class="box box-widget widget-user" style=" cursor:pointer; float: left;"><center>'
                                    + '<img src="{% static "dotracks/img/folder.png" %}" alt="" style="width: 80%; margin-top: 10px;" class="img-responsive">'
                                    + '</center><p style="float: left;"><center style="font-weight:bold;margin-bottom: 2px;">' + data[i].libelle + '</center></p></div></div>');
                            }

                            SAVEdosChooseCl()

                            chooseSAVEdosCl()
                        }
                    }
                });
            })

            setTimeout(function () {
                $('.btnMinus').click();
            }, 100);

            function SAVEdosChooseCl() {
                $('.SAVEdosChoose').on('click', function () {
                    var idDOS = $(this).attr('data-id')
                    var libelle = $('#saveDOClibeller').val()
                    var ele = CKEDITOR.instances.doctextarea.getData();

                    if (libelle != "") {
                        $('#modalHead').html("Operation en Cours")
                        $('#modalBody').html("<h4>Veuillez Patienter Sauvegarde en cours d'operation...</h4>")
                        $('#messModalbtn').click()

                        $.ajax({
                            type: 'POST',
                            url: "{{baseurl}}/Member/saveDOCcontent",
                            data: { 'dos': idDOS, 'libelle': libelle, 'descipt': ele, 'cic': '{{ userInfo.cic }}', 'csrfmiddlewaretoken': '{{ csrf_token }}' },
                            success: function (data) {
                                //alert(data)
                                if (data == 0) {
                                    $('#modalHead').html("Operation Termine")
                                    $('#modalBody').html("<h4>Sauvegarde effectue avec succes. Redirection en cours...</h4>")
                                    setTimeout(function () {
                                        window.location.href = "{{ baseurl }}/Member/documents/{{lang_abbr}}"
                                    }, 500)
                                } else {
                                    $('#modalHead').html("Echec de l'operation")
                                    $('#modalBody').html("<h4>Echec de l'operation Sauvegarde annuler</h4>")
                                }
                            }
                        })
                    } else {
                        $('#modalHead').html("Operation annuler")
                        $('#modalBody').html("<h4>Veuillez specifier un titre a votre document.</h4>")
                        $('#messModalbtn').click()
                    }
                })
            }

            $('#searchChat').keyup(function () {
                var q = $(this).val()
                if (q.length >= 2) {
                    $('#retrivedUsers').show(function () {
                        var $this = $(this)
                        $(this).html('<div class="col-md-12 alert text-center" style="background: #f5f5f5; padding:1px; color:#444;margin-top:10px;"><center><img src="{% static "dotracks/img/preloader.gif" %}" style="width: 80px; height: 80px; border-radius: 50%;"/></center></div>');

                        $.ajax({
                            type: 'POST',
                            url: "{{ baseusrl }}/Member/searchChat",
                            data: { 'q': q, 'csrfmiddlewaretoken': '{{ csrf_token }}' },
                            //contentType: "application/json",
                            dataType: 'json',
                            success: function (data) {
                                if (data == 0) {
                                    $this.html('<div class="callout callout-success" style="margin-top: 5px;"><h5>{{ langue.form_aucunedonne}}</h5></div>')
                                } else {
                                    $this.html("")
                                    for (i in data) {
                                        $this.append('<li class="list-group-item" style="margin-bottom: 0px;"><a href="{{baseurl}}/Member/chat/user' + data[i].id + '/{{lang_abbr}}"><img class="profile-user-img img-responsive img-circle" src="{% static "dotracks/dist/img/user4-128x128.jpg" %}" alt="DOTrack"'
                                            + 'style="width: 37px;float: left;margin-top: -8px;margin-right:5px;"><b>' + data[i].prenom + '&nbsp;' + data[i].nom + '</a></li>');
                                    }
                                }
                            }
                        });
                    })
                } else {
                    $('#retrivedUsers').hide()
                }
            })
        })
    </script>

    <script>
        $(document).ready(function () {

            $('.DOCIMAGE').on('click', function () {
                var link = $(this).attr('data-link')
                $('#divDOCIMAGE').fadeIn()
                $('#contentDOCIMAGE').html('<center><img src="{% static "dotracks/img/preloader.gif" %}" style="width: 180px; height: 180px; border-radius: 50%;"/></center>')
                setTimeout(function () {
                    $('#contentDOCIMAGE').html('<center><img src="{{ baseurl }}/' + link + '" class="ninIMAGE"/></center>')
                    $('.ninIMAGE').css({ 'width': '100%' })

                    $('.ninIMAGE').mouseover(function () {
                        $('.nin').fadeIn('slow')
                    })
                    $('.ninIMAGE').doubleclick(function () {
                        $('.nin').css({ 'display': 'none' })
                    })

                    $('#zoom-plus').on('click', function () {
                        var taille = $('.ninIMAGE').width()
                        var sum = taille + 50
                        $('.ninIMAGE').css({ 'width': sum + 'px' })
                    })

                    $('#zoom-moins').on('click', function () {
                        var taille = $('.ninIMAGE').width()
                        var sum = taille - 50
                        $('.ninIMAGE').css({ 'width': sum + 'px' })
                    })
                }, 300)

                var prevlink = $(this).prev('.DOCIMAGE').attr('id')
                var nextlink = $(this).next('.DOCIMAGE').attr('id')

                $('.nin-url').attr('data-prev-url', prevlink)
                $('.nin-url').attr('data-next-url', nextlink)
            })

            $('.nin-prev').on('click', function () {
                var link = $(this).attr('data-prev-url')
                if (link != "") {
                    $('#' + link).click()
                }
            })

            $('.nin-next').on('click', function () {
                var link = $(this).attr('data-next-url')
                if (link != "") {
                    $('#' + link).click()
                }
            })

            $('#deconnexionUser').on('click', function (e) {
                e.preventDefault()
                $('#deconnexionModalbtn').click()
            })

            $('#clickToDeconnect').on('click', function () {
                window.location.href = "{{ baseUrl }}/Member/logout/{{ lang_abbr }}/"
            })

            $('.MenuChat').on('click', function () {
                $('#blockUsers').animate({ "width": "300px", "right": "0" })
            })

            $('.closeMenuChat').on('click', function () {
                $('#blockUsers').animate({ "width": "0px", "right": "-50px" })
            })

            $('.changePicProfil').on('click', function () {

                if (confirm("Modification de la photo de profil en cours ! Continuer l'operation ?")) {
                    var link = $(this).attr('data-url')

                    $('#modalBody').html("<h4>Mise a jour de la photo de profil en cours...</h4>")
                    $('#messModalbtn').click()

                    $.ajax({
                        type: 'POST',
                        url: "{{baseurl}}/Member/changeProfil",
                        data: { 'photo': link, 'csrfmiddlewaretoken': '{{ csrf_token }}' },
                        success: function (data) {
                            if (data == 0) {
                                window.location.reload()
                            } else {
                                $('#modalBody').html("<h4>Echec lors de mise a jour veuillez reessayer plutard...</h4>")
                            }
                        }
                    })
                } else {
                    return false
                }
            })

            ///////////////////////////////////// initiated mouchard ///////////////////////////////////////

            function Mouchard() {
                $.ajax({
                    type: 'POST',
                    url: "{{baseurl}}/Member/addMouchard",
                    data: { 'page': '{{ request.resolver_match.view_name }}', 'csrfmiddlewaretoken': '{{ csrf_token }}', 'ip': 1, 'ent': 1, 'use': 1, 'adm': 1, 'tache': '{{ request.session.tacheMouchard }}' },
                    //contentType: "application/json",
                    //dataType: 'json',
                    success: function (data) {
                        if (data == 0) {
                            //alert('mouchard on')
                        } else {
                            //alert('mouchard off')
                        }
                    }
                })
            }
            Mouchard()

            //retriveChat()

            /////////////////////////////////////////////////////////////////////////////////////////////////////

            $('.menus').attr('', function () {
                var $this = $(this)
                var id = $(this).attr('data-iden')
                //alert(id)
                $.post('{{ baseusrl }}/dashboard/member/checkAcces', { 'id': id, 'csrfmiddlewaretoken': '{{ csrf_token }}' }, function (data) {
                    if (data == 0) {
                        $this.addClass('visible')
                        $('#menus').show()
                    }else{
                        $this.attr('href', '')
                        $this.text('Acces Refuse')
                    }
                });
            });

            $('.addsDossier').on('click', function () {
                var id = $(this).attr('data-dos')
                $('#sdossierdOS').val(id)
            });

            $(".choose_image").click(function (e) {
                $("#images").click();
                e.preventDefault();
            });

            $(".choose_file").click(function (e) {
                $("#fileDocx").click();
                e.preventDefault();
            });

            $('#images').change(function (e) {
                e.preventDefault();
                var $this = $(this);
                var ext = ['png', 'jpeg', 'jpg', 'gif', 'bmp'];
                if ($.inArray($(this).val().split('.').pop().toLowerCase(), ext) === -1) {
                    $this.val("");

                    $('#modalHead').html("Operation annuler")
                    $('#modalBody').html("<h4>Erreur: Format non Valide image requise.</h4>")
                    $('#messModalbtn').click()

                    $('.cropped_image').fadeOut();
                    $('#imgprofile').fadeIn();
                    $('#upload-image').hide();
                } else {
                    $('#formatImage').val($(this).val().split('.').pop().toLowerCase())
                    $('#imgprofile').hide();
                    $('#upload-image').fadeIn();
                    $('.cropped_image').fadeIn();
                    //$("#my_fileForm").submit();
                }
            });

            $('#fileDocx').change(function (e) {
                e.preventDefault();
                var $this = $(this);
                var ext = ['pdf', 'docx', 'doc', 'pptx', 'html', 'txt', 'csv', 'odt'];
                if ($.inArray($(this).val().split('.').pop().toLowerCase(), ext) === -1) {
                    $('#modalHead').html("Operation annuler")
                    $('#modalBody').html("<h4>Erreur: Format non Valide Document requis.</h4>")
                    $('#messModalbtn').click()
                    $this.val("");
                    $('.cropped_file').fadeOut();
                    $('#imgprofile').fadeIn();
                    $('#upload-file').hide();
                } else {
                    $('#formatFichier').val($(this).val().split('.').pop().toLowerCase())
                    $('#imgprofile').hide();
                    $('#upload-file').fadeIn();
                    $('.cropped_file').fadeIn();
                    //$("#my_fileForm").submit();
                }
            });
        });

        $(document).ready(function () {

            $('.messThumb').on('click', function () {
                var actual = $('#chatMessage').val()
                var texte = $(this).attr('data-value')

                $('#chatMessage').val(actual + ' ' + texte)
                //$('#addMess').submit()
            });

            $('.cropped_file').on('click', function (ev) {
                var dos = $('#documentFile').attr('data-pdos')
                var pdos = $('#documentFile').attr('data-predoc')
                var entr = $('#documentFile').attr('data-dos')

                $('#dos2').val(dos)
                $('#pdos2').val(pdos)
                $('#entr2').val(entr)

                $('#submitFiles').submit()
            });

            $('.cropped_image').on('click', function (ev) {
                var dos = $('#documentFile').attr('data-pdos')
                var pdos = $('#documentFile').attr('data-predoc')
                var entr = $('#documentFile').attr('data-dos')

                $('#dos').val(dos)
                $('#pdos').val(pdos)
                $('#entr').val(entr)

                $('#submitImages').submit()
            });

            $('#submitImages').on('submit', function (e) {
                var $this = $(this);
                e.preventDefault()

                $('#modalHead').html("Debut de l'operation")
                $('#modalBody').html("<h4>Veuillez Patienter Operation en cours...</h4>")
                $('#messModalbtn').click()

                $.ajax({
                    url: "{{ baseusrl }}/Member/addFileImage",
                    type: "POST",
                    data: new FormData(this),
                    contentType: false,
                    processData: false,
                    enctype: "multipart/form-data",
                    success: function (data) {
                        if (data === '0') {
                            $('#modalHead').html("Operation Termine")
                            $('#modalBody').html("<h4>Enregistrement effectue avec succes.</h4>")
                            window.location.reload();
                        } else {
                            $('#modalHead').html("Echec de l'operation")
                            $('#modalBody').html("<h4>Transfert Annuler reessayer plutard..</h4>")
                        }
                    }
                });
            });

            $('#submitFiles').on('submit', function (e) {
                var $this = $(this);
                e.preventDefault()

                $('#modalHead').html("Debut de l'operation")
                $('#modalBody').html("<h4>Veuillez Patienter Operation en cours...</h4>")
                $('#messModalbtn').click()

                $.ajax({
                    url: "{{ baseusrl }}/Member/addFileImage",
                    type: "POST",
                    data: new FormData(this),
                    contentType: false,
                    processData: false,
                    enctype: "multipart/form-data",
                    success: function (data) {
                        if (data === '0') {
                            $('#modalHead').html("Operation Termine")
                            $('#modalBody').html("<h4>Enregistrement effectue avec succes.</h4>")
                            window.location.reload();
                        } else {
                            $('#modalHead').html("Echec de l'operation")
                            $('#modalBody').html("<h4>Transfert Annuler reessayer plutard..</h4>")
                        }
                    }
                });
            });

            function chatViews(id) {
                $.ajax({
                    type: 'POST',
                    url: "{{baseurl}}/Member/chatViews",
                    data: { 'id': id, 'csrfmiddlewaretoken': '{{ csrf_token }}' },
                    success: function (data) {
                        if (data != 0) {
                            //alert(data)
                        } else {
                            //alert(data)
                        }
                    }
                })
            }

            function loadNotif() {
                $.ajax({
                    type: 'POST',
                    url: "{{baseurl}}/Member/loadNotif",
                    data: { 'csrfmiddlewaretoken': '{{ csrf_token }}' },
                    dataType: 'json',
                    success: function (data) {
                        if (data != 0) {
                            $('#contentNotif').text('')
                            for (i in data) {
                                if (data[i].status == 0) {
                                    var backg = 'background:#f5f5f5;'
                                } else {
                                    var backg = 'background:#fff;'
                                }
                                $('#contentNotif').append('<li style="' + backg + '" data-id="' + data[i].id + '" class="vuNotif"><a href="' + data[i].lien + '"><h6 style="margin-top:-4px;">' + data[i].libeller + '<small><i class="fa fa-clock-o" style="float:right"></i></small></h6><p style="margin-top:-10px">' + data[i].details + '</p></a></li>')
                            }
                        } else {
                            //alert(data)
                        }
                    }
                })
            }

            $('.notifications-menu').on('click', function (e) {
                var $this = $(this);
                e.preventDefault()

                $('.vuNotif').attr('', function () {
                    var id = $(this).attr('data-id')

                    $.ajax({
                        url: "{{ baseusrl }}/Member/vuNotif",
                        type: "POST",
                        data: { 'id': id, 'csrfmiddlewaretoken': '{{ csrf_token }}' },
                        success: function (data) {
                            if (data === '0') {

                            } else {

                            }
                        }
                    });
                });

            });

            function countNotif() {
                $.ajax({
                    type: 'POST',
                    url: "{{baseurl}}/Member/countNotif",
                    data: { 'csrfmiddlewaretoken': '{{ csrf_token }}' },
                    //dataType: 'json',
                    success: function (data) {
                        var ancNbr = $('.actuel').text()
                        if (data != 0) {
                            if (ancNbr != data) {
                                singSongNotif()
                            } else {

                            }
                        }

                        if (data != 0) {
                            $('#newNbrNotif').val(data)
                            $('.nbrNotif').text(data)
                        } else {
                            $('.nbrNotif').text(0)
                        }
                    }
                })
            }

            setInterval(function () {
                loadNotif('{{ request.session.d_memberid }}')
                countNotif('{{ request.session.d_memberid }}')
            }, 1000)

            function singSongNotif() {
                $('#newNotifMess').fadeIn()
                $('#SongNotif').html('<audio autoplay><source src="{% static "dotracks/plugins/notif.mp3" %}"></audio>')

                setTimeout(function () {
                    $('#newNotifMess').fadeOut()
                }, 3500)
                setTimeout(function () {
                    $('#SongNotif').html('')
                }, 6500)
            }

            function addNotifMessage(id, message, lien) {
                var mess = message;
                $.ajax({
                    type: 'POST',
                    url: "{{baseurl}}/Member/notification",
                    data: { 'use': id, 'libeller': 'Nouveau Message', 'lien': lien, 'details': mess, 'other': '', 'csrfmiddlewaretoken': '{{ csrf_token }}' },
                    success: function (data) {
                        if (data != 0) {
                            //alert(data)
                        } else {
                            //alert(data)
                        }
                    }
                })
            }

            function retriveChat() {

                //chatViews('{{userID}}')

                $.ajax({
                    type: 'POST',
                    url: "{{baseurl}}/Member/retriveChat",
                    data: { 'use2': '{{userID}}', 'csrfmiddlewaretoken': '{{ csrf_token }}' },
                    //contentType: "application/json",
                    dataType: 'json',
                    success: function (data) {
                        if (data != 0) {
                            $('#chatContent').html('')
                            for (i in data) {
                                if (data[i].use == '{{userID}}') {
                                    var color = 'bg-red'
                                    var noms = data[i].use__nom
                                    var pnoms = data[i].use__prenom
                                    var trash = '<a href="#" class="pull-right rply" data-val="' + data[i].libelle + '" style="margin-right:15px"><i class="fa fa-reply"></i></a>'
                                    var float = 'right'
                                    var back = '#eee; border-radius:6px 6px 6px 6px;'

                                    if (data[i].status == 1) {
                                        var classVUS = '';
                                    } else {
                                        var classVUS = 'markVus';
                                    }

                                    var alignText = "text-align:right;";

                                    var commentChat = 'background:#868e96;color:#fff;padding:8px;border-radius:5px;margin-right:5px; margin-bottom:6px'
                                    var boutt = 'background:#868e96;border:0px';

                                    var statu = '';

                                } else {
                                    var color = 'bg-blue'
                                    var noms = data[i].use__nom
                                    var pnoms = data[i].use__prenom
                                    var trash = '<a href="#" class="pull-right" style="margin-right:15px; color:orange"><i class="fa fa-trash"></i></a>'
                                    var float = 'left'
                                    var back = '#2196f3!important; color:#fff; border-radius:6px 6px 6px 6px;'

                                    var commentChat = 'background:#fff;color:#6f42c1;padding:8px;border-radius:5px;margin-right:5px;margin-bottom:6px'
                                    var boutt = 'background:#fff;border:0px';
                                    var classVUS = '';

                                    if (data[i].status == 1) {
                                        var statu = '<span class="pull-right" style="margin-top:-0px; margin-right:5px; color:skyblue">Vu&nbsp; <i class="fa fa-check"></i></span>'
                                    } else {
                                        var statu = ''
                                    }

                                    var alignText = "text-align:left;";
                                }


                                $('#chatContent').append('<li data-id="' + data[i].id + '" class="' + classVUS + '"><i class="hidden fa fa-user ' + color + '"></i>'
                                    + '<div class="timeline-item card" style="background:#fff; border:0px">'
                                    + '<span class="time hidden"><i class="fa fa-clock-o"></i>&nbsp;' + data[i].dates + '</span>'

                                    + '<h3 class="timeline-header" style="' + alignText + ' border:0px;"><a href="#"><img src="{{ baseurl }}/' + data[i].use__photo + '" style="width:30px; border-radius:50%;"/> ' + pnoms + '&nbsp;' + noms + '</a></h3>'
                                    + '<div class="timeline-body fa" style="background:' + back + '; padding-bottom:1px; border:0px; float:' + float + '"><p id="textChat-' + i + '">' + data[i].libelle + '</p></div>' + statu + trash + '</div></li>'
                                    + '')

                                //alert($('#textChat-'+i).text())
                                $('#textChat-' + i).text($('#textChat-' + i).html().replace('@', '<a style="' + commentChat + '" href="#textChat-' + i + '"><button style="' + boutt + '">'))
                                $('#textChat-' + i).html($('#textChat-' + i).text().replace('//', '</button></a>'))
                            }

                            $('.rply').on('click', function (e) {
                                var texte = $(this).attr('data-val')
                                $('#chatMessage').val('@' + texte + ' // ')
                            })

                            $('.markVus').attr('', function () {
                                var id = $(this).attr('data-id');
                                chatViews(id)
                            })

                        } else {
                            $('#chatContent').html('<div class="col-md-1"></div><div class="col-md-10 card"><hr><div class="alert alert-primary bg-blue">Aucun message disponible</div><br>'
                                + '<h2 class="mdc-theme--secondary mdc-typography--subheading1">Comment sa marche ?</h2><p class="mdc-typography--body1">'
                                + 'Choisisez un utilisateurs dans vos contacts pour demarrer une discussion instantannee.</p>'
                                + '<hr></div>')
                        }
                    }
                })
            }

            if ('{{request.resolver_match.view_name}}' == 'Messagerie') {
                setInterval(function () {
                    retriveChat();
                }, 1000)
            }

            $('.sender').on('click', function () {
                var id = $(this).attr('data-user')
                $('#iddirectchat').val(id)
                directchat()
                $('.contact').click()
            })

            $('.messThumb').on('click', function () {
                var actual = $('#inputChat').val()
                var texte = $(this).attr('data-value')

                $('#inputChat').val(actual + ' ' + texte)
                //$('#addMess').submit()
            });

            $('.userDirectChat').on('click', function () {
                var user = $(this).attr('id')
                $('.btnListContact').click()
                $('#iddirectchat').val(user)
                directchat()
            })

            function directchat() {
                var $this = $(".direct-chat-messages")
                var id = $('#iddirectchat').val()

                //chatViews(id)

                $.ajax({
                    type: 'POST',
                    url: "{{baseurl}}/Member/retriveChat",
                    data: { 'use2': id, 'csrfmiddlewaretoken': '{{ csrf_token }}' },
                    //contentType: "application/json",
                    dataType: 'json',
                    success: function (data) {
                        //alert(data)
                        if (data != 0) {
                            $this.html('');
                            var vu = "none"
                            var color = ""
                            var card = ""
                            var status = ""
                            for (i in data) {
                                if ('{{ request.session.d_memberid }}' != data[i].use_id2) {
                                    color = "left"
                                    card = "#fff"
                                    status = "etat"

                                    directName = "display:none;"

                                    if (data[i].status == 1 || '{{ request.session.d_memberid }}' == data[i].use_id2) {
                                        vu = ""
                                    } else {
                                        vu = "none"
                                    }

                                    var commentChat = 'background:#fff;color:#333;padding:8px;border-radius:5px;margin-right:5px;margin-bottom:6px'
                                    var boutt = 'background:#fff;border:0px';
                                    var colu = ''

                                } else {
                                    color = "right"
                                    card = "#fff"
                                    vu = "none"
                                    status = "etat2"

                                    directName = "display:block;"

                                    var commentChat = 'background:#fff;color:#fff;padding:8px;border-radius:5px;margin-right:5px; margin-bottom:6px'
                                    var boutt = 'background:#fff;border:0px';
                                    var colu = 'color:#6f42c1'

                                    $('#messeger').html('<img class="direct-chat-img" src="{{ baseurl }}/' + data[i].use__photo + '" alt="message DOTrack user image" style="height:25px; width:25px; margin-top:-3px; margin-right:5px"/>' + data[i].use__prenom)
                                    $('#messegerLink').attr('href', '{{baseurl}}/Member/chat/user' + id + '/{{lang_abbr}}')
                                }

                                $this.append('<div class="direct-chat-msg ' + color + '" ><div class="direct-chat-info clearfix"><span class="direct-chat-name pull-left" style="' + directName + '">' + data[i].use__nom + '&nbsp;' + data[i].use__prenom + '</span><span class="direct-chat-timestamp pull-right">' + data[i].dates + '</span></div><!-- /.direct-chat-info --><img class="direct-chat-img" src="{{ baseurl }}/' + data[i].use__photo + '" alt="message DOTrack user image" /><!-- /.direct-chat-img --><div class="direct-chat-text" id="textChat-' + i + '">' + data[i].libelle + '</div><!-- /.direct-chat-text --></div><!-- /.direct-chat-msg -->');

                                $('#textChat-' + i).text($('#textChat-' + i).html().replace('@', '<div class="col-md-12" style="' + commentChat + '"><a href="#textChat-' + i + '" style="' + colu + '"><b style="' + boutt + '">'))
                                $('#textChat-' + i).html($('#textChat-' + i).text().replace('//', '</b></a></div>'))

                            }

                            $('#clickbas').click()

                        } else {
                            $this.html('<section class="col-md-12 card"><hr><div class="alert alert-primary bg-blue">Aucun message disponible</div><br>'
                                + '<h2 class="mdc-theme--secondary mdc-typography--subheading1">Comment sa marche ?</h2><p class="mdc-typography--body1">'
                                + 'Choisisez un utilisateurs dans vos contacts pour demarrer une discussion instantannee.</p>'
                                + '<hr></section>');
                        }
                    }
                });
            }

            if ('{{request.resolver_match.view_name}}' != 'Messagerie') {
                setInterval(function () {
                    directchat();
                }, 1000)
            }

            $('.chatValidate').on('submit', function (e) {
                e.preventDefault();
                var $this = $(this);
                $this.find('.fro').addClass('disabled')
                setTimeout(function () {
                    var use_id1 = $('#use_id1').val()
                    var use_id2 = $('#use_id2').val()
                    var chatMessage = $('#chatMessage').val()

                    $.ajax({
                        url: $this.attr('action'),
                        type: "POST",
                        data: { 'libelle': chatMessage, 'use_id2': use_id2, 'use': use_id1, 'csrfmiddlewaretoken': '{{ csrf_token }}' },
                        success: function (htm) {
                            if (htm !== "0") {
                            } else {
                                $this.find('#chatMessage').val("")
                                var lien = '{{baseurl}}/Member/chat/user' + use_id1 + '/{{lang_abbr}}';
                                addNotifMessage(use_id2, chatMessage, lien)

                                retriveChat()
                            }
                            $this.find('.fro').removeClass('disabled')
                        }
                    });
                }, 20);
            });

            $('#chatValidate2').on('submit', function (e) {
                e.preventDefault();
                var $this = $(this);
                $this.find('.fro').addClass('disabled')
                setTimeout(function () {
                    var use_id1 = $('#use_id1').val()
                    var use_id2 = $('#iddirectchat').val()
                    var chatMessage = $('#inputChat').val()

                    $.ajax({
                        url: $this.attr('action'),
                        type: "POST",
                        data: { 'libelle': chatMessage, 'use_id2': use_id2, 'use': use_id1, 'csrfmiddlewaretoken': '{{ csrf_token }}' },
                        success: function (htm) {
                            if (htm !== "0") {
                            } else {
                                $this.find('#inputChat').val("")
                                var lien = '{{baseurl}}/Member/chat/user' + use_id1 + '/{{lang_abbr}}';
                                addNotifMessage(use_id2, chatMessage, lien)

                                directchat()
                            }
                            $this.find('.fro').removeClass('disabled')
                        }
                    });
                }, 20);
                $this.find('.fro').removeClass('disabled')
            });

            /////////////////////////////// Ajouter un utilisateur a la sucursale /////////////////////////////////////
            $('.addElemt').on('submit', function (e) {
                e.preventDefault();
                var $this = $(this);
                $this.find('#reponses').show();
                $this.find('#reponses').html('<div class="col-md-12 alert text-center" style="background: #f5f5f5; padding:4px; color:#444;"><center><img src="{% static "dotracks/img/preloader.gif" %}" style="width: 80px; height: 80px; border-radius: 50%;"/><br>Enregistrement en cours ...</center>'
                    + '</div>');
                $this.find('#push').hide();
                var mess = $this.find('#note').val()
                setTimeout(function () {
                    $.ajax({
                        url: $this.attr('action'),
                        type: "POST",
                        data: $this.serialize(),
                        success: function (htm) {
                            if (htm !== "0") {
                                $this.find('#reponses').html('<div class="alert" style="background: #f5f5f5; color: #ff6565; margin-top: -25px;">'
                                    + '<div class="col-md-12 text-center">'
                                    + htm + '</div></div>');
                                $this.find('#push').show();
                            } else {
                                //alert('succes');
                                $this.find('#reponses').html('<div class="alert"style="background: #f5f5f5; color: #4CAF50; margin-top: -25px;">'
                                    + '<div class="col-md-12 text-center">'
                                    + mess + ' </div></div>');
                                $this.find('.form-control').val("");
                                setTimeout(function () {
                                    window.location.href = "";
                                }, 2200);
                            }
                            setTimeout(function () {
                                //$('.alert').hide('slow');
                            }, 3500);
                        }, error: function (htm) {
                            alert(htm);
                        }
                    });
                }, 3200);
            });


            /////////////////////////////// Ajouter un utilisateur a la sucursale /////////////////////////////////////
            $('#addUseruser').on('submit', function (e) {
                e.preventDefault();
                var $this = $(this);
                $this.find('#reponses').show();
                $this.find('#reponses').html('<div class="col-md-12 alert text-center" style="background: #f5f5f5; padding:4px; color:#444;"><center><img src="{% static "dotracks/img/preloader.gif" %}" style="width: 80px; height: 80px; border-radius: 50%;"/><br>Enregistrement en cours ...</center>'
                    + '</div>');
                $this.find('#push').hide();
                setTimeout(function () {
                    $.ajax({
                        url: $this.attr('action'),
                        type: "POST",
                        data: $this.serialize(),
                        success: function (htm) {
                            if (htm !== "0") {
                                //alert(htm)
                                $this.find('#reponses').html('<div class="alert" style="background: #f5f5f5; color: #ff6565; margin-top: -25px;">'
                                    + '<div class="col-md-12 text-center">'
                                    + htm + '</div></div>');
                                $this.find('#push').show();
                            } else {
                                //alert(htm);
                                $this.find('#reponses').html('<div class="alert"style="background: #f5f5f5; color: #4CAF50; margin-top: -25px;">'
                                    + '<div class="col-md-12 text-center">'
                                    + '{{ langue.form_User_Ajoute_avec_succes }} </div></div>');
                                $this.find('.form-control').val("");
                                setTimeout(function () {
                                    window.location.href = "";
                                }, 2200);
                            }
                            setTimeout(function () {
                                //$('.alert').hide('slow');
                            }, 3500);
                        }, error: function (htm) {
                            alert(htm);
                        }
                    });
                }, 3200);
            });
        });
    </script>

    <script>
        $(function () {
            $('.table').DataTable({
                'paging': true,
                'lengthChange': false,
                'searching': true,
                'ordering': false,
                'info': false,
                'autoWidth': false
            })

            //CKEDITOR.replace('editor1')
            //bootstrap WYSIHTML5 - text editor
            $('.textarea').wysihtml5()
        })
    </script>

    <script type="text/javascript">
        "use strict";
        var newwindow;

        function SpeechRecognitionHotness() {

            /* the following code opens the popunder... based on https://github.com/tuki/js-popunder
            newwindow = window.open('popup.html', 'listener', 'height=500,width=450');
            newwindow.blur();
            newwindow.opener.window.focus();
            window.self.window.focus();
            window.focus();
            var nothing = '';
            var ghost = document.createElement("a");
            ghost.href = "data:text/html,<scr" + nothing + "ipt>window.close();</scr" + nothing + "ipt>";
            document.getElementsByTagName("body")[0].appendChild(ghost);
            var clk = document.createEvent("MouseEvents");
            clk.initMouseEvent("click", false, true, window, 0, 0, 0, 0, 0, true, false, false, true, 0, null);
            ghost.dispatchEvent(clk);
            ghost.parentNode.removeChild(ghost);*/

            //activate legit SpeechRecognition

            //var lang = 
            var recognition = new webkitSpeechRecognition();
            recognition.maxAlternatives = 1;
            recognition.continuous = true;
            recognition.lang = 'fr-FR';

            // once you have permission to capture speech.
            recognition.onstart = function (event) {
                document.getElementById('instructions').removeAttribute("style");
            };

            // when speech results are received.
            recognition.onresult = function (event) {
                //show the text received
                var transcript = event.results[event.resultIndex][0].transcript;
                document.getElementById('chatMessage').value = transcript;
                document.getElementById('success').removeAttribute("style");

                //stop listening legitly and activate listening in the background.
                recognition.abort();
                //newwindow.startListening();
            };

            recognition.start();
        }

        //attach the function to the button.
        document.getElementById('speechButton').addEventListener('click', SpeechRecognitionHotness, false);

    </script>

    <script type="text/javascript">

        function djMicrophone() {
            var webaudio_tooling_obj = function () {

                var audioContext = new AudioContext();

                console.log("audio is starting up ...");

                var BUFF_SIZE = 16384;

                var audioInput = null,
                    microphone_stream = null,
                    gain_node = null,
                    script_processor_node = null,
                    script_processor_fft_node = null,
                    analyserNode = null;

                if (!navigator.getUserMedia)
                    navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia ||
                        navigator.mozGetUserMedia || navigator.msGetUserMedia;

                if (navigator.getUserMedia) {

                    navigator.getUserMedia({ audio: true },
                        function (stream) {
                            start_microphone(stream);
                        },
                        function (e) {
                            alert('Error capturing audio.');
                        }
                    );

                } else { alert('getUserMedia not supported in this browser.'); }

                // ---

                function show_some_data(given_typed_array, num_row_to_display, label) {

                    var size_buffer = given_typed_array.length;
                    var index = 0;
                    var max_index = num_row_to_display;

                    console.log("__________ " + label);

                    for (; index < max_index && index < size_buffer; index += 1) {

                        console.log(given_typed_array[index]);
                    }
                }

                function process_microphone_buffer(event) {

                    var i, N, inp, microphone_output_buffer;

                    microphone_output_buffer = event.inputBuffer.getChannelData(0); // just mono - 1 channel for now

                    // microphone_output_buffer  <-- this buffer contains current gulp of data size BUFF_SIZE

                    show_some_data(microphone_output_buffer, 5, "from getChannelData");
                }

                function start_microphone(stream) {

                    gain_node = audioContext.createGain();
                    gain_node.connect(audioContext.destination);

                    microphone_stream = audioContext.createMediaStreamSource(stream);
                    microphone_stream.connect(gain_node);

                    script_processor_node = audioContext.createScriptProcessor(BUFF_SIZE, 1, 1);
                    script_processor_node.onaudioprocess = process_microphone_buffer;

                    microphone_stream.connect(script_processor_node);

                    // --- enable volume control for output speakers

                    document.getElementById('volume').addEventListener('change', function () {

                        var curr_volume = this.value;
                        gain_node.gain.value = curr_volume;

                        console.log("curr_volume ", curr_volume);
                    });

                    // --- setup FFT

                    script_processor_fft_node = audioContext.createScriptProcessor(2048, 1, 1);
                    script_processor_fft_node.connect(gain_node);

                    analyserNode = audioContext.createAnalyser();
                    analyserNode.smoothingTimeConstant = 0;
                    analyserNode.fftSize = 2048;

                    microphone_stream.connect(analyserNode);

                    analyserNode.connect(script_processor_fft_node);

                    script_processor_fft_node.onaudioprocess = function () {

                        // get the average for the first channel
                        var array = new Uint8Array(analyserNode.frequencyBinCount);
                        analyserNode.getByteFrequencyData(array);

                        // draw the spectrogram
                        if (microphone_stream.playbackState == microphone_stream.PLAYING_STATE) {

                            show_some_data(array, 5, "from fft");
                        }
                    };
                }
            }(); //  webaudio_tooling_obj = function()
        }
    </script>

    <style>
        .crop_preview {
            background: #e1e1e1;
            width: 100%;
            padding: 30px;
            max-height: 500px;
            margin-top: 30px
        }

        .cropped_image,
        .cropped_file {
            display: none;
        }

        #upload-image {
            display: none;
        }
    </style>

    <script>
        $(function () {

            $('#chooseImage').on('click', function () {
                $('#id_file').click()
            })

            $('#id_file').change(function (e) {
                e.preventDefault();
                var $this = $(this);
                var ext = ['jpg', 'gif', 'jpeg', 'jfif', 'png'];
                if ($.inArray($(this).val().split('.').pop().toLowerCase(), ext) === -1) {
                    $this.val("");
                    $('#modalHead').html("Operation annuler")
                    $('#modalBody').html("<h4>Veuillez choisir une image valide puis reessayer.</h4>")
                    $('#messModalbtn').click()
                } else {
                    /* SCRIPT TO OPEN THE MODAL WITH THE PREVIEW */
                    if (this.files && this.files[0]) {
                        var reader = new FileReader();
                        reader.onload = function (e) {
                            $("#image").attr("src", e.target.result);
                            $("#modalCrop").modal("show");
                        }
                        reader.readAsDataURL(this.files[0]);
                    }
                }
            });

            /* SCRIPTS TO HANDLE THE CROPPER BOX */
            var $image = $("#image");
            var cropBoxData;
            var canvasData;
            $("#modalCrop").on("shown.bs.modal", function () {
                $image.cropper({
                    viewMode: 1,
                    aspectRatio: 1 / 1,
                    minCropBoxWidth: 350,
                    minCropBoxHeight: 350,
                    dragCropBox: true,
                    mouseWheelZoom: false,
                    cropBoxResizable: false,
                    ready: function () {
                        $image.cropper("setCanvasData", canvasData);
                        $image.cropper("setCropBoxData", cropBoxData);
                    }
                });
            }).on("hidden.bs.modal", function () {
                cropBoxData = $image.cropper("getCropBoxData");
                canvasData = $image.cropper("getCanvasData");
                $image.cropper("destroy");
            });

            $(".js-zoom-in").click(function () {
                $image.cropper("zoom", 0.1);
            });

            $(".js-zoom-out").click(function () {
                $image.cropper("zoom", -0.1);
            });

            $(".js-rotate-right").click(function () {
                $image.cropper("rotate", "30deg");
            });

            /* SCRIPT TO COLLECT THE DATA AND POST TO THE SERVER */
            $(".js-crop-and-upload").click(function () {
                var cropData = $image.cropper("getData");
                $("#id_x").val(cropData["x"]);
                $("#id_y").val(cropData["y"]);
                $("#id_height").val(cropData["height"]);
                $("#id_width").val(cropData["width"]);
                $("#formUpload").submit();
            });

        });
    </script>

    <script src="{% static 'dotracks/docx2html-master/dist/index.js' %}"></script>

    <script>
        function test(input) {
            require("docx2html")(input.files[0]).then(function (converted) {
                text.value = converted.toString()
            })
        }
    </script>
</body>

</html>